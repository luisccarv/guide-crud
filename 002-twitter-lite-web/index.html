<form>
    <input name="iptCriaPost" placeholder="Digite o seu post" />
    <button type="submit">Postar</button>
</form>

<ul class="listaPosts">
</ul>

<script>
    console.log('Hey, guys! - Part 2');
    console.log('#Building CRUD (Create, Read, Update, Delete)');

    // Base de Dados [ Modelo ]
    const twitterLite = {
        users: [
            {
                username: 'clarkkent',
            }
        ],
        posts: [
            {
                id: 1,
                owner: 'clarkkent',
                content: 'My first tweet'
            }
        ],

        readPosts() {
            twitterLite.posts.forEach(({ owner, content }) => {
                twitterLite.addPost({ owner: owner, content: content }, true)
            });
        },

        addPost(data, htmlOnly = false) {
            if (!htmlOnly) {
                // Cria Post na Memória (Array/Objeto)
                twitterLite.posts.push({
                    id: twitterLite.posts.length + 1,
                    owner: data.owner,
                    content: data.content
                });
            }

            // Cria Post no HTML
            const $listaPosts = document.querySelector('.listaPosts')
            $listaPosts.insertAdjacentHTML('afterbegin', `
                <li>
                    <button>Delete</button>
                    ${data.content}
                </li>
            `)
        }
    };

    // Linguagem Pura
    // - Criar variáveis
    // - Sincronizar o conteúdo das variáveis com o HTML
    // - Atualizar variáveis

    // [ Código de Frontend: Web ]
    const $meuForm = document.querySelector('form')
    console.log($meuForm)

    // CRUD [ Create ]
    $meuForm.addEventListener('submit', function criaPostController(infosDoEvento) {
        infosDoEvento.preventDefault()
        console.log("Estamos criando um post novo")

        const $meuInput = document.querySelector('input[name="iptCriaPost"]')
        //const $meuInput = document.querySelector('input')
        //const $meuInput = document.querySelector('input[name="iptCriaPost"]').value

        twitterLite.addPost({ owner: 'clarkkent', content: $meuInput.value });
        console.log(twitterLite.posts)

        $meuInput.value = ''
    })

    // CRUD [ Read ]
    twitterLite.readPosts();

    // CRUD [ Update ]


    // CRUD [ Delete ]
    document.querySelector('.listaPosts').addEventListener('click', function (infosDoEvento) {
        console.log('Houve um click')
    })
</script>